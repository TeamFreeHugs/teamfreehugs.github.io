function URI(t){t||(t="");var h=/^(?:([^:\/?\#]+):)?(?:\/\/([^\/?\#]*))?([^?\#]*)(?:\?([^\#]*))?(?:\#(.*))?/,r=t.match(h);this.scheme=r[1]||null,this.authority=r[2]||null,this.path=r[3]||null,this.query=r[4]||null,this.fragment=r[5]||null}URI.prototype.toString=function(){var t="";return this.scheme&&(t+=this.scheme+":"),this.authority&&(t+="//"+this.authority),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.fragment&&(t+="#"+this.fragment),t},function(){function t(t,h){var r=/^(.*)\//;return t.authority&&!t.path?"/"+h:t.path.match(r)[0]+h}function h(t){if(!t)return"";var h=t.replace(/\/\.\//g,"/");for(h=h.replace(/\/\.$/,"/");h.match(r);)h=h.replace(r,"/");for(h=h.replace(/\/([^\/]*)\/\.\.$/,"/");h.match(/\/\.\.\//);)h=h.replace(/\/\.\.\//,"/");return h}var r=/\/((?!\.\.\/)[^\/]*)\/\.\.\//;URI.prototype.resolve=function(r){var e=new URI;return this.scheme?(e.scheme=this.scheme,e.authority=this.authority,e.path=h(this.path),e.query=this.query):(this.authority?(e.authority=this.authority,e.path=h(this.path),e.query=this.query):(this.path?("/"===this.path.charAt(0)?e.path=h(this.path):(e.path=t(r,this.path),e.path=h(e.path)),e.query=this.query):(e.path=r.path,e.query=this.query?this.query:r.query),e.authority=r.authority),e.scheme=r.scheme),e.fragment=this.fragment,e}}();