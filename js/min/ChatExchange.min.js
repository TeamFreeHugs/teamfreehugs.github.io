function sendMessage(e,t,s,n){$.post("http://"+e+"/chats/"+t+"/messages/new",{text:s,fkey:n})}function editMessage(e,t,s,n){$.post("http://"+e+"/messages/"+t,{fkey:n,text:s})}function deleteMessage(e,t,s){$.post("http://"+e+"/messages/"+t+"/delete",{fkey:s})}function toggleStar(e,t,s){$.post("http://"+e+"/messages/"+t+"/star",{fkey:s})}function getMessageLink(e,t){return"http://"+e+"transcript/message/"+t+"#"+t}function getEvents(e,t,s,n){return url="http://"+e+"/chats/"+t+"/events",a=$.ajax({type:"POST",url:url,data:{fkey:s,mode:"Messages",since:0,msgCount:n},async:!1}),a.responseText}function addMessageListener(e,t,s,n,a){return id=window.setInterval(function(){for(req=getEvents(e,t,s,a),events=JSON.parse(req).events,pos=0;pos<events.length;++pos)event=events[pos],null!==n|"function"!=typeof n&&window.setTimeout(function(){n(event)},1)},5e3),id}function contains(e,t){for(a=0;a<e.length;++a)if(e[a]==t)return!0;return!1}function demoWithTavern(){var e=[];return id=addMessageListener("chat.meta.stackexchange.com",89,fkey().fkey,function(t){contains(e,t.message_id)||(alert("New Event!"),alert("Message ID: "+t.message_id),alert("Room Name: "+t.room_name),alert("Username: "+t.user_name),alert("Time Stamp: "+t.time_stamp),e.push(t.message_id))}),id}